<!--
  ____________________________________________________________________
    [carousel]
  ____________________________________________________________________
  -->
  <section class="carousel template">
    <div class="center above glide">
      <div data-glide-el="track" class="glide__track">
        <div class="slides glide__slides slides-landing">

        </div>
      </div>

      <div class="slider__bullets glide__bullets" data-glide-el="controls[nav]">
          
      </div>
    </div>
<div class="code-wrap">
  <a href="#" class="code-button black">
    <img src="https://i.imgur.com/P197gya.png" /><span class="label"><span class="show">show</span><span class="hide">hide</span> code</span>
  </a>
  <div class="code">
    <h2>[carousel]</h2>
    <div class="columns clearfix">
      <div class="column">
        <h3>HTML Template</h3>
        <pre class="line-numbers">
<code class="language-html">&lt;section class=&quot;carousel template&quot;&gt;
  &lt;div class=&quot;center above glide&quot;&gt;
    &lt;div data-glide-el=&quot;track&quot; class=&quot;glide__track&quot;&gt;
      &lt;div class=&quot;slides glide__slides slides-landing&quot;&gt;

      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;slider__bullets glide__bullets&quot; data-glide-el=&quot;controls[nav]&quot;&gt;
          
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/section&gt;

&lt;div class=&quot;carousel-item glide__slide template&quot;&gt;
  &lt;div class=&quot;inner&quot;&gt;
    &lt;div class=&quot;image-wrap&quot;&gt;
      &lt;div class=&quot;image image-landing&quot;&gt;
        &lt;img class=&quot;spacer&quot; src=&quot;https://imgur.com/YLLYqYt.png&quot; /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;h2 class=&quot;title title-landing&quot;&gt;&lt;/h2&gt;
    &lt;div class=&quot;text text-landing&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;button-wrap link-landing&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code>
        </pre>
      </div>
      <div class="column">
        <h3>JavaScript Descriptor</h3>
        <pre class="line-numbers">
<code class="language-javascript">shortcodes.register('carousel', {
  anchor: '.shortcode-landing',
  bind_fn: 'append',
  template: 'section.carousel',
  item_template: '.carousel-item',
  item_anchor: '.slides-landing',
  callback: function(template) {
    document.querySelector('section.carousel').setAttribute('id', 'main')
    var glide = new Glide(template, {
      type: 'slider',
      perView: 3,
      bound: true,
      breakpoints: {
        960: {
          perView: 1
        }
      }
    })

    var slides = template.querySelectorAll('.glide__slide')
    var bullets = template.querySelector('.glide__bullets')

    if (bullets)
      for (var i = 0; i < slides.length; i++) {
        bullets.appendChild(parseDOM(`&lt;button class=&quot;slider__bullet glide__bullet&quot; data-glide-dir=&quot;=${i}&quot;&gt;&lt;/button&gt;`))
      }

    glide.mount()

    matchMedia('(max-width: 960px)', function(e) {
      if (e.matches) {
        glide.enable()
      } else {
        glide.mount()
        glide.update({ startAt: 0 })
        glide.disable()
      }
    })

    if (matchMedia('(max-width: 960px)').matches) {
      glide.enable()
    } else {
      glide.mount()
      glide.update({ startAt: 0 })
      glide.disable()
    }
  },
  elements: {
    img: {
      count: 'many',
      bind_extracted: {
        style_property: 'background-image',
        extracted_property: 'src'
      },
      extract: 'src',
      anchor: '.image-landing',
      anchor_element: 'item'
    },
    a: {
      count: 'many',
      anchor: '.link-landing',
      extract: ['href', 'target', 'html'],
      bind_extracted: function(dest, extract, props, descriptor, num) {
        if (num === 1) {
          dest.appendChild(parseDOM(`&lt;a href=&quot;#view-code&quot; target=&quot;_action&quot; class=&quot;button small green&quot;&gt;${extract.html}&lt;/a&gt;`))
        } else if (num === 2) {
          dest.appendChild(parseDOM(`&lt;a href=&quot;#toggle-editor&quot; target=&quot;_action&quot; class=&quot;button small green&quot;&gt;${extract.html}&lt;/a&gt;`))
        } else {
          dest.appendChild(parseDOM(`&lt;a href=&quot;${extract.href}&quot; target=&quot;${extract.target}&quot; class=&quot;button small green&quot;&gt;${extract.html}&lt;/a&gt;`))
        }
      },
      anchor_element: 'item'
    },
    h1: {
      count: 'many',
      bind_extracted: 'html',
      anchor: '.title-landing',
      extract: 'html',
      anchor_element: 'item'
    },
    rest: {
      anchor: '.text-landing',
      bind_extracted: 'append',
      extract: 'self',
      anchor_element: 'item'
    }
  }
});</code>
    </pre>
  </div>
</div>
</section>

<div class="carousel-item glide__slide template">
  <div class="inner">
    <div class="image-wrap">
      <div class="image image-landing">
        <img class="spacer" src="https://imgur.com/YLLYqYt.png" />
      </div>
    </div>
    <h2 class="title title-landing"></h2>
    <div class="text text-landing"></div>
    <div class="button-wrap link-landing"></div>
  </div>
</div>


<script type="text/javascript">
shortcodes.register('carousel', {
  anchor: '.shortcode-landing',
  bind_fn: 'append',
  template: 'section.carousel',
  item_template: '.carousel-item',
  item_anchor: '.slides-landing',
  callback: function(template) {
    document.querySelector('section.carousel').setAttribute('id', 'main')
    var glide = new Glide(template, {
      type: 'slider',
      perView: 3,
      bound: true,
      breakpoints: {
        960: {
          perView: 1
        }
      }
    })

    var slides = template.querySelectorAll('.glide__slide')
    var bullets = template.querySelector('.glide__bullets')

    if (bullets)
      for (var i = 0; i < slides.length; i++) {
        bullets.appendChild(parseDOM(`<button class="slider__bullet glide__bullet" data-glide-dir="=${i}"></button>`))
      }

    glide.mount()

    matchMedia('(max-width: 960px)', function(e) {
      if (e.matches) {
        glide.enable()
      } else {
        glide.mount()
        glide.update({ startAt: 0 })
        glide.disable()
      }
    })

    if (matchMedia('(max-width: 960px)').matches) {
      glide.enable()
    } else {
      glide.mount()
      glide.update({ startAt: 0 })
      glide.disable()
    }
  },
  elements: {
    img: {
      count: 'many',
      bind_extracted: {
        style_property: 'background-image',
        extracted_property: 'src'
      },
      extract: 'src',
      anchor: '.image-landing',
      anchor_element: 'item'
    },
    a: {
      count: 'many',
      anchor: '.link-landing',
      extract: ['href', 'target', 'html'],
      bind_extracted: function(dest, extract, props, descriptor, num) {
        if (num === 1) {
          dest.appendChild(parseDOM(`<a href="#view-code" target="_action" class="button small green">${extract.html}</a>`))
        } else if (num === 2) {
          dest.appendChild(parseDOM(`<a href="#toggle-editor" target="_action" class="button small green">${extract.html}</a>`))
        } else {
          dest.appendChild(parseDOM(`<a href="${extract.href}" target="${extract.target}" class="button small green">${extract.html}</a>`))
        }
      },
      anchor_element: 'item'
    },
    h1: {
      count: 'many',
      bind_extracted: 'html',
      anchor: '.title-landing',
      extract: 'html',
      anchor_element: 'item'
    },
    rest: {
      anchor: '.text-landing',
      bind_extracted: 'append',
      extract: 'self',
      anchor_element: 'item'
    }
  }
});
</script>
